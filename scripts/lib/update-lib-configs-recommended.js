"use strict";

const fs = require("fs");
const path = require("path");
const { CLIEngine } = require("eslint");
const { pluginId } = require("./plugin-id");
const { rules } = require("./rules");

const filePath = path.resolve(__dirname, "../../lib/configs/recommended.js");
const rawContent = `/* DON'T EDIT THIS FILE. This is generated by 'scripts/lib/update-lib-configs-recommended.js' */
"use strict"

module.exports = {
    plugins: ["${pluginId}"],
    rules: {
        ${rules
        .filter(rule => rule.recommended)
        .map(rule => `"${rule.id}": "error"`)
        .join(",\n        ")}
    }
};
`;
const engine = new CLIEngine({ fix: true });
const lintResult = engine.executeOnText(rawContent, filePath);
const content = lintResult.results[0].output || rawContent;

fs.writeFileSync(filePath, content);
